{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Documents\\\\Task-Management-Application-main\\\\frontend\\\\src\\\\components\\\\Header.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { listNotifications, markNotificationRead, deleteNotification, deleteAllNotifications } from \"../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Header = () => {\n  _s();\n  const navigate = useNavigate();\n  const isAuthenticated = !!localStorage.getItem(\"userToken\");\n  const [notifications, setNotifications] = useState([]);\n  const [open, setOpen] = useState(false);\n  const bellRef = useRef(null);\n  const prevUnreadIdsRef = useRef(new Set());\n  const [toast, setToast] = useState({\n    show: false,\n    type: 'info',\n    message: ''\n  });\n  const showToast = (type, message) => {\n    setToast({\n      show: true,\n      type,\n      message\n    });\n    setTimeout(() => setToast(t => ({\n      ...t,\n      show: false\n    })), 2500);\n  };\n  const unreadCount = useMemo(() => notifications.filter(n => !n.read).length, [notifications]);\n  const loadNotifications = async () => {\n    try {\n      if (!isAuthenticated) return;\n      const data = await listNotifications();\n      const list = Array.isArray(data) ? data.slice(0, 20) : [];\n\n      // Détecter les nouvelles non lues par rapport au précédent état\n      const newUnreadIds = new Set(list.filter(n => !n.read).map(n => String(n._id)));\n      const prevUnreadIds = prevUnreadIdsRef.current;\n      let hasNew = false;\n      for (const id of newUnreadIds) {\n        if (!prevUnreadIds.has(id)) {\n          hasNew = true;\n          break;\n        }\n      }\n      // Mettre à jour la ref pour la prochaine itération\n      prevUnreadIdsRef.current = newUnreadIds;\n      setNotifications(list);\n      if (hasNew) {\n        showToast('info', 'Nouvelle notification reçue');\n      }\n    } catch (e) {\n      // ignore erreurs réseau ponctuelles\n      setNotifications([]);\n      prevUnreadIdsRef.current = new Set();\n    }\n  };\n  useEffect(() => {\n    if (isAuthenticated) {\n      loadNotifications();\n      const t = setInterval(loadNotifications, 30000); // refresh toutes les 30s\n      return () => clearInterval(t);\n    }\n  }, [isAuthenticated]);\n\n  // Fermer le dropdown si clic à l'extérieur\n  useEffect(() => {\n    const handler = e => {\n      if (!open) return;\n      if (bellRef.current && !bellRef.current.contains(e.target)) {\n        setOpen(false);\n      }\n    };\n    document.addEventListener('click', handler);\n    return () => document.removeEventListener('click', handler);\n  }, [open]);\n  const onMarkRead = async id => {\n    try {\n      await markNotificationRead(id);\n      setNotifications(prev => prev.map(n => n._id === id ? {\n        ...n,\n        read: true\n      } : n));\n      // mettre à jour la ref\n      prevUnreadIdsRef.current.delete(String(id));\n    } catch {}\n  };\n  const onDeleteOne = async id => {\n    try {\n      await deleteNotification(id);\n      setNotifications(prev => prev.filter(n => n._id !== id));\n      // mettre à jour la ref (au cas où c'était une non lue)\n      const s = new Set(prevUnreadIdsRef.current);\n      s.delete(String(id));\n      prevUnreadIdsRef.current = s;\n      showToast('success', 'La notification a été supprimée.');\n    } catch {}\n  };\n  const onMarkAllRead = async () => {\n    try {\n      const unread = notifications.filter(n => !n.read);\n      for (const n of unread) {\n        await markNotificationRead(n._id);\n      }\n      setNotifications(prev => prev.map(n => ({\n        ...n,\n        read: true\n      })));\n      prevUnreadIdsRef.current = new Set();\n      showToast('success', 'Toutes les notifications ont été marquées comme lues.');\n    } catch {}\n  };\n  const onDeleteAll = async () => {\n    try {\n      await deleteAllNotifications();\n      setNotifications([]);\n      prevUnreadIdsRef.current = new Set();\n      showToast('success', 'Toutes les notifications ont été supprimées.');\n    } catch {}\n  };\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    className: \"navbar navbar-expand-lg navbar-light bg-light px-3\",\n    children: [toast.show && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 16,\n        right: 16,\n        zIndex: 2000,\n        minWidth: 280\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `alert alert-${toast.type} alert-dismissible fade show shadow`,\n        role: \"alert\",\n        children: [toast.message, /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-close\",\n          onClick: () => setToast({\n            ...toast,\n            show: false\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      className: \"navbar-brand shadow-sm p-2 rounded\",\n      style: {\n        backgroundColor: \"#fff\",\n        cursor: 'pointer'\n      },\n      onClick: () => navigate('/'),\n      children: \"My To Do App\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), !isAuthenticated ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ms-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/login\",\n        className: \"btn btn-outline-primary me-2\",\n        children: \"Connexion\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/register\",\n        className: \"btn btn-primary\",\n        children: \"Inscription\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ms-auto d-flex align-items-center\",\n      ref: bellRef,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"position-relative me-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-light position-relative\",\n          onClick: () => setOpen(o => !o),\n          \"aria-label\": \"Notifications\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-bell fs-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this), unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\",\n            children: [unreadCount, /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"visually-hidden\",\n              children: \"non lues\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, this), open && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dropdown-menu dropdown-menu-end show\",\n          style: {\n            minWidth: 320,\n            maxWidth: 420,\n            right: 0\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-between align-items-center px-3 py-2 border-bottom\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Notifications\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"btn-group btn-group-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-outline-secondary\",\n                onClick: onMarkAllRead,\n                disabled: unreadCount === 0,\n                children: \"Tout marquer lu\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-outline-danger\",\n                onClick: onDeleteAll,\n                disabled: notifications.length === 0,\n                children: \"Tout supprimer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              maxHeight: 360,\n              overflowY: 'auto'\n            },\n            children: notifications.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"px-3 py-3 text-muted\",\n              children: \"Aucune notification\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 21\n            }, this) : notifications.map(n => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `px-3 py-2 border-bottom ${n.read ? '' : 'bg-light'}`,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between align-items-start gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"fw-semibold small\",\n                    children: n.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"small text-muted\",\n                    children: n.message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"small text-secondary\",\n                    children: new Date(n.createdAt).toLocaleString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex align-items-center gap-2\",\n                  children: [!n.read && /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-sm btn-link\",\n                    onClick: () => onMarkRead(n._id),\n                    children: \"Marquer lu\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 173,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-sm btn-link text-danger\",\n                    onClick: () => onDeleteOne(n._id),\n                    title: \"Supprimer\",\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"bi bi-trash\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 176,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 25\n              }, this)\n            }, n._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 23\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n};\n_s(Header, \"5x4IK2dil1fMPYsNm22uF6ksYjE=\", false, function () {\n  return [useNavigate];\n});\n_c = Header;\nexport default Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","useNavigate","listNotifications","markNotificationRead","deleteNotification","deleteAllNotifications","jsxDEV","_jsxDEV","Header","_s","navigate","isAuthenticated","localStorage","getItem","notifications","setNotifications","open","setOpen","bellRef","prevUnreadIdsRef","Set","toast","setToast","show","type","message","showToast","setTimeout","t","unreadCount","filter","n","read","length","loadNotifications","data","list","Array","isArray","slice","newUnreadIds","map","String","_id","prevUnreadIds","current","hasNew","id","has","e","setInterval","clearInterval","handler","contains","target","document","addEventListener","removeEventListener","onMarkRead","prev","delete","onDeleteOne","s","onMarkAllRead","unread","onDeleteAll","className","children","style","position","top","right","zIndex","minWidth","role","onClick","fileName","_jsxFileName","lineNumber","columnNumber","backgroundColor","cursor","href","ref","o","maxWidth","disabled","maxHeight","overflowY","title","Date","createdAt","toLocaleString","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/Documents/Task-Management-Application-main/frontend/src/components/Header.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { listNotifications, markNotificationRead, deleteNotification, deleteAllNotifications } from \"../services/api\";\n\nconst Header = () => {\n  const navigate = useNavigate();\n  const isAuthenticated = !!localStorage.getItem(\"userToken\");\n  const [notifications, setNotifications] = useState([]);\n  const [open, setOpen] = useState(false);\n  const bellRef = useRef(null);\n  const prevUnreadIdsRef = useRef(new Set());\n  const [toast, setToast] = useState({ show: false, type: 'info', message: '' });\n\n  const showToast = (type, message) => {\n    setToast({ show: true, type, message });\n    setTimeout(() => setToast((t) => ({ ...t, show: false })), 2500);\n  };\n\n  const unreadCount = useMemo(() => notifications.filter(n => !n.read).length, [notifications]);\n\n  const loadNotifications = async () => {\n    try {\n      if (!isAuthenticated) return;\n      const data = await listNotifications();\n      const list = Array.isArray(data) ? data.slice(0, 20) : [];\n\n      // Détecter les nouvelles non lues par rapport au précédent état\n      const newUnreadIds = new Set(list.filter(n => !n.read).map(n => String(n._id)));\n      const prevUnreadIds = prevUnreadIdsRef.current;\n      let hasNew = false;\n      for (const id of newUnreadIds) {\n        if (!prevUnreadIds.has(id)) { hasNew = true; break; }\n      }\n      // Mettre à jour la ref pour la prochaine itération\n      prevUnreadIdsRef.current = newUnreadIds;\n\n      setNotifications(list);\n      if (hasNew) {\n        showToast('info', 'Nouvelle notification reçue');\n      }\n    } catch (e) {\n      // ignore erreurs réseau ponctuelles\n      setNotifications([]);\n      prevUnreadIdsRef.current = new Set();\n    }\n  };\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      loadNotifications();\n      const t = setInterval(loadNotifications, 30000); // refresh toutes les 30s\n      return () => clearInterval(t);\n    }\n  }, [isAuthenticated]);\n\n  // Fermer le dropdown si clic à l'extérieur\n  useEffect(() => {\n    const handler = (e) => {\n      if (!open) return;\n      if (bellRef.current && !bellRef.current.contains(e.target)) {\n        setOpen(false);\n      }\n    };\n    document.addEventListener('click', handler);\n    return () => document.removeEventListener('click', handler);\n  }, [open]);\n\n  const onMarkRead = async (id) => {\n    try {\n      await markNotificationRead(id);\n      setNotifications((prev) => prev.map(n => n._id === id ? { ...n, read: true } : n));\n      // mettre à jour la ref\n      prevUnreadIdsRef.current.delete(String(id));\n    } catch {}\n  };\n\n  const onDeleteOne = async (id) => {\n    try {\n      await deleteNotification(id);\n      setNotifications((prev) => prev.filter(n => n._id !== id));\n      // mettre à jour la ref (au cas où c'était une non lue)\n      const s = new Set(prevUnreadIdsRef.current);\n      s.delete(String(id));\n      prevUnreadIdsRef.current = s;\n      showToast('success', 'La notification a été supprimée.');\n    } catch {}\n  };\n\n  const onMarkAllRead = async () => {\n    try {\n      const unread = notifications.filter(n => !n.read);\n      for (const n of unread) {\n        await markNotificationRead(n._id);\n      }\n      setNotifications((prev) => prev.map(n => ({ ...n, read: true })));\n      prevUnreadIdsRef.current = new Set();\n      showToast('success', 'Toutes les notifications ont été marquées comme lues.');\n    } catch {}\n  };\n\n  const onDeleteAll = async () => {\n    try {\n      await deleteAllNotifications();\n      setNotifications([]);\n      prevUnreadIdsRef.current = new Set();\n      showToast('success', 'Toutes les notifications ont été supprimées.');\n    } catch {}\n  };\n\n  return (\n    <nav className=\"navbar navbar-expand-lg navbar-light bg-light px-3\">\n      {/* Toast notifications */}\n      {toast.show && (\n        <div style={{ position: 'fixed', top: 16, right: 16, zIndex: 2000, minWidth: 280 }}>\n          <div className={`alert alert-${toast.type} alert-dismissible fade show shadow`} role=\"alert\">\n            {toast.message}\n            <button type=\"button\" className=\"btn-close\" onClick={() => setToast({ ...toast, show: false })}></button>\n          </div>\n        </div>\n      )}\n\n      <a\n        className=\"navbar-brand shadow-sm p-2 rounded\"\n        style={{ backgroundColor: \"#fff\", cursor: 'pointer' }}\n        onClick={() => navigate('/')}\n      >\n        My To Do App\n      </a>\n      {!isAuthenticated ? (\n        <div className=\"ms-auto\">\n          <a href=\"/login\" className=\"btn btn-outline-primary me-2\">\n            Connexion\n          </a>\n          <a href=\"/register\" className=\"btn btn-primary\">\n            Inscription\n          </a>\n        </div>\n      ) : (\n        <div className=\"ms-auto d-flex align-items-center\" ref={bellRef}>\n          <div className=\"position-relative me-3\">\n            <button className=\"btn btn-light position-relative\" onClick={() => setOpen(o => !o)} aria-label=\"Notifications\">\n              <i className=\"bi bi-bell fs-5\"></i>\n              {unreadCount > 0 && (\n                <span className=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\">\n                  {unreadCount}\n                  <span className=\"visually-hidden\">non lues</span>\n                </span>\n              )}\n            </button>\n            {open && (\n              <div className=\"dropdown-menu dropdown-menu-end show\" style={{ minWidth: 320, maxWidth: 420, right: 0 }}>\n                <div className=\"d-flex justify-content-between align-items-center px-3 py-2 border-bottom\">\n                  <strong>Notifications</strong>\n                  <div className=\"btn-group btn-group-sm\">\n                    <button className=\"btn btn-outline-secondary\" onClick={onMarkAllRead} disabled={unreadCount === 0}>Tout marquer lu</button>\n                    <button className=\"btn btn-outline-danger\" onClick={onDeleteAll} disabled={notifications.length === 0}>Tout supprimer</button>\n                  </div>\n                </div>\n                <div style={{ maxHeight: 360, overflowY: 'auto' }}>\n                  {notifications.length === 0 ? (\n                    <div className=\"px-3 py-3 text-muted\">Aucune notification</div>\n                  ) : (\n                    notifications.map((n) => (\n                      <div key={n._id} className={`px-3 py-2 border-bottom ${n.read ? '' : 'bg-light'}`}>\n                        <div className=\"d-flex justify-content-between align-items-start gap-2\">\n                          <div>\n                            <div className=\"fw-semibold small\">{n.title}</div>\n                            <div className=\"small text-muted\">{n.message}</div>\n                            <div className=\"small text-secondary\">{new Date(n.createdAt).toLocaleString()}</div>\n                          </div>\n                          <div className=\"d-flex align-items-center gap-2\">\n                            {!n.read && (\n                              <button className=\"btn btn-sm btn-link\" onClick={() => onMarkRead(n._id)}>Marquer lu</button>\n                            )}\n                            <button className=\"btn btn-sm btn-link text-danger\" onClick={() => onDeleteOne(n._id)} title=\"Supprimer\">\n                              <i className=\"bi bi-trash\"></i>\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    ))\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </nav>\n  );\n};\n\nexport default Header;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}