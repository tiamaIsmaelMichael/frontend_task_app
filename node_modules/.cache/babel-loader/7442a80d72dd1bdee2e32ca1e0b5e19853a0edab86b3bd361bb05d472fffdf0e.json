{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Documents\\\\Task-Management-Application-main\\\\frontend\\\\src\\\\components\\\\Header.jsx\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { listNotifications, markNotificationRead, deleteNotification, deleteAllNotifications } from \"../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Header = () => {\n  _s();\n  const navigate = useNavigate();\n  const [isAuthenticated, setIsAuthenticated] = useState(!!sessionStorage.getItem(\"userToken\"));\n  const [notifications, setNotifications] = useState([]);\n  const [open, setOpen] = useState(false);\n  const bellRef = useRef(null);\n  const prevUnreadIdsRef = useRef(new Set());\n  const [toast, setToast] = useState({\n    show: false,\n    type: 'info',\n    message: ''\n  });\n  const showToast = (type, message) => {\n    setToast({\n      show: true,\n      type,\n      message\n    });\n    setTimeout(() => setToast(t => ({\n      ...t,\n      show: false\n    })), 2500);\n  };\n  const unreadCount = useMemo(() => notifications.filter(n => !n.read).length, [notifications]);\n  const loadNotifications = useCallback(async () => {\n    try {\n      if (!isAuthenticated) return;\n      const data = await listNotifications();\n      const list = Array.isArray(data) ? data.slice(0, 20) : [];\n\n      // Détecter les nouvelles non lues par rapport au précédent état\n      const newUnreadIds = new Set(list.filter(n => !n.read).map(n => String(n._id)));\n      const prevUnreadIds = prevUnreadIdsRef.current;\n      let hasNew = false;\n      for (const id of newUnreadIds) {\n        if (!prevUnreadIds.has(id)) {\n          hasNew = true;\n          break;\n        }\n      }\n      // Mettre à jour la ref pour la prochaine itération\n      prevUnreadIdsRef.current = newUnreadIds;\n      setNotifications(list);\n      if (hasNew) {\n        showToast('info', 'Nouvelle notification reçue');\n      }\n    } catch (e) {\n      // ignore erreurs réseau ponctuelles\n      setNotifications([]);\n      prevUnreadIdsRef.current = new Set();\n    }\n  }, [isAuthenticated]);\n  useEffect(() => {\n    if (isAuthenticated) {\n      loadNotifications();\n      const t = setInterval(loadNotifications, 30000); // refresh toutes les 30s\n      return () => clearInterval(t);\n    }\n  }, [isAuthenticated, loadNotifications]);\n\n  // Suivre les changements d'auth dans la session (ex: login/logout)\n  useEffect(() => {\n    const onChange = () => setIsAuthenticated(!!sessionStorage.getItem('userToken'));\n    window.addEventListener('storage', onChange);\n    window.addEventListener('auth-changed', onChange);\n    return () => {\n      window.removeEventListener('storage', onChange);\n      window.removeEventListener('auth-changed', onChange);\n    };\n  }, []);\n\n  // Fermer le dropdown si clic à l'extérieur\n  useEffect(() => {\n    const handler = e => {\n      if (!open) return;\n      if (bellRef.current && !bellRef.current.contains(e.target)) {\n        setOpen(false);\n      }\n    };\n    document.addEventListener('click', handler);\n    return () => document.removeEventListener('click', handler);\n  }, [open]);\n  const onMarkRead = async id => {\n    try {\n      await markNotificationRead(id);\n      setNotifications(prev => prev.map(n => n._id === id ? {\n        ...n,\n        read: true\n      } : n));\n      // mettre à jour la ref\n      prevUnreadIdsRef.current.delete(String(id));\n    } catch {}\n  };\n  const onDeleteOne = async id => {\n    try {\n      await deleteNotification(id);\n      setNotifications(prev => prev.filter(n => n._id !== id));\n      // mettre à jour la ref (au cas où c'était une non lue)\n      const s = new Set(prevUnreadIdsRef.current);\n      s.delete(String(id));\n      prevUnreadIdsRef.current = s;\n      showToast('success', 'La notification a été supprimée.');\n    } catch {}\n  };\n  const onMarkAllRead = async () => {\n    try {\n      const unread = notifications.filter(n => !n.read);\n      for (const n of unread) {\n        await markNotificationRead(n._id);\n      }\n      setNotifications(prev => prev.map(n => ({\n        ...n,\n        read: true\n      })));\n      prevUnreadIdsRef.current = new Set();\n      showToast('success', 'Toutes les notifications ont été marquées comme lues.');\n    } catch {}\n  };\n  const onDeleteAll = async () => {\n    try {\n      await deleteAllNotifications();\n      setNotifications([]);\n      prevUnreadIdsRef.current = new Set();\n      showToast('success', 'Toutes les notifications ont été supprimées.');\n    } catch {}\n  };\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    className: \"navbar navbar-expand-lg navbar-light bg-light px-3\",\n    children: [toast.show && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 16,\n        right: 16,\n        zIndex: 2000,\n        minWidth: 280\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `alert alert-${toast.type} alert-dismissible fade show shadow`,\n        role: \"alert\",\n        children: [toast.message, /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-close\",\n          onClick: () => setToast({\n            ...toast,\n            show: false\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"navbar-brand shadow-sm p-2 rounded btn btn-link text-decoration-none\",\n      style: {\n        backgroundColor: \"#fff\",\n        cursor: 'pointer'\n      },\n      onClick: () => navigate('/'),\n      children: \"My To Do App\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), !isAuthenticated ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ms-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/login\",\n        className: \"btn btn-outline-primary me-2\",\n        children: \"Connexion\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/register\",\n        className: \"btn btn-primary\",\n        children: \"Inscription\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ms-auto d-flex align-items-center\",\n      ref: bellRef,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"position-relative me-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-light position-relative\",\n          onClick: () => setOpen(o => !o),\n          \"aria-label\": \"Notifications\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-bell fs-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }, this), unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\",\n            children: [unreadCount, /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"visually-hidden\",\n              children: \"non lues\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, this), open && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dropdown-menu dropdown-menu-end show\",\n          style: {\n            minWidth: 320,\n            maxWidth: 420,\n            right: 0\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-between align-items-center px-3 py-2 border-bottom\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Notifications\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"btn-group btn-group-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-outline-secondary\",\n                onClick: onMarkAllRead,\n                disabled: unreadCount === 0,\n                children: \"Tout marquer lu\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-outline-danger\",\n                onClick: onDeleteAll,\n                disabled: notifications.length === 0,\n                children: \"Tout supprimer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              maxHeight: 360,\n              overflowY: 'auto'\n            },\n            children: notifications.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"px-3 py-3 text-muted\",\n              children: \"Aucune notification\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 21\n            }, this) : notifications.map(n => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `px-3 py-2 border-bottom ${n.read ? '' : 'bg-light'}`,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between align-items-start gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"fw-semibold small\",\n                    children: n.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"small text-muted\",\n                    children: n.message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"small text-secondary\",\n                    children: new Date(n.createdAt).toLocaleString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex align-items-center gap-2\",\n                  children: [!n.read && /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-sm btn-link\",\n                    onClick: () => onMarkRead(n._id),\n                    children: \"Marquer lu\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-sm btn-link text-danger\",\n                    onClick: () => onDeleteOne(n._id),\n                    title: \"Supprimer\",\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"bi bi-trash\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 188,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 187,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 25\n              }, this)\n            }, n._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 23\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n};\n_s(Header, \"njJrGgvMqd4siCtsemDVkGOs2r0=\", false, function () {\n  return [useNavigate];\n});\n_c = Header;\nexport default Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","useState","useNavigate","listNotifications","markNotificationRead","deleteNotification","deleteAllNotifications","jsxDEV","_jsxDEV","Header","_s","navigate","isAuthenticated","setIsAuthenticated","sessionStorage","getItem","notifications","setNotifications","open","setOpen","bellRef","prevUnreadIdsRef","Set","toast","setToast","show","type","message","showToast","setTimeout","t","unreadCount","filter","n","read","length","loadNotifications","data","list","Array","isArray","slice","newUnreadIds","map","String","_id","prevUnreadIds","current","hasNew","id","has","e","setInterval","clearInterval","onChange","window","addEventListener","removeEventListener","handler","contains","target","document","onMarkRead","prev","delete","onDeleteOne","s","onMarkAllRead","unread","onDeleteAll","className","children","style","position","top","right","zIndex","minWidth","role","onClick","fileName","_jsxFileName","lineNumber","columnNumber","backgroundColor","cursor","href","ref","o","maxWidth","disabled","maxHeight","overflowY","title","Date","createdAt","toLocaleString","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/Documents/Task-Management-Application-main/frontend/src/components/Header.jsx"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { listNotifications, markNotificationRead, deleteNotification, deleteAllNotifications } from \"../services/api\";\n\nconst Header = () => {\n  const navigate = useNavigate();\n  const [isAuthenticated, setIsAuthenticated] = useState(!!sessionStorage.getItem(\"userToken\"));\n  const [notifications, setNotifications] = useState([]);\n  const [open, setOpen] = useState(false);\n  const bellRef = useRef(null);\n  const prevUnreadIdsRef = useRef(new Set());\n  const [toast, setToast] = useState({ show: false, type: 'info', message: '' });\n\n  const showToast = (type, message) => {\n    setToast({ show: true, type, message });\n    setTimeout(() => setToast((t) => ({ ...t, show: false })), 2500);\n  };\n\n  const unreadCount = useMemo(() => notifications.filter(n => !n.read).length, [notifications]);\n\n  const loadNotifications = useCallback(async () => {\n    try {\n      if (!isAuthenticated) return;\n      const data = await listNotifications();\n      const list = Array.isArray(data) ? data.slice(0, 20) : [];\n\n      // Détecter les nouvelles non lues par rapport au précédent état\n      const newUnreadIds = new Set(list.filter(n => !n.read).map(n => String(n._id)));\n      const prevUnreadIds = prevUnreadIdsRef.current;\n      let hasNew = false;\n      for (const id of newUnreadIds) {\n        if (!prevUnreadIds.has(id)) { hasNew = true; break; }\n      }\n      // Mettre à jour la ref pour la prochaine itération\n      prevUnreadIdsRef.current = newUnreadIds;\n\n      setNotifications(list);\n      if (hasNew) {\n        showToast('info', 'Nouvelle notification reçue');\n      }\n    } catch (e) {\n      // ignore erreurs réseau ponctuelles\n      setNotifications([]);\n      prevUnreadIdsRef.current = new Set();\n    }\n  }, [isAuthenticated]);\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      loadNotifications();\n      const t = setInterval(loadNotifications, 30000); // refresh toutes les 30s\n      return () => clearInterval(t);\n    }\n  }, [isAuthenticated, loadNotifications]);\n\n  // Suivre les changements d'auth dans la session (ex: login/logout)\n  useEffect(() => {\n    const onChange = () => setIsAuthenticated(!!sessionStorage.getItem('userToken'));\n    window.addEventListener('storage', onChange);\n    window.addEventListener('auth-changed', onChange);\n    return () => {\n      window.removeEventListener('storage', onChange);\n      window.removeEventListener('auth-changed', onChange);\n    };\n  }, []);\n\n  // Fermer le dropdown si clic à l'extérieur\n  useEffect(() => {\n    const handler = (e) => {\n      if (!open) return;\n      if (bellRef.current && !bellRef.current.contains(e.target)) {\n        setOpen(false);\n      }\n    };\n    document.addEventListener('click', handler);\n    return () => document.removeEventListener('click', handler);\n  }, [open]);\n\n  const onMarkRead = async (id) => {\n    try {\n      await markNotificationRead(id);\n      setNotifications((prev) => prev.map(n => n._id === id ? { ...n, read: true } : n));\n      // mettre à jour la ref\n      prevUnreadIdsRef.current.delete(String(id));\n    } catch {}\n  };\n\n  const onDeleteOne = async (id) => {\n    try {\n      await deleteNotification(id);\n      setNotifications((prev) => prev.filter(n => n._id !== id));\n      // mettre à jour la ref (au cas où c'était une non lue)\n      const s = new Set(prevUnreadIdsRef.current);\n      s.delete(String(id));\n      prevUnreadIdsRef.current = s;\n      showToast('success', 'La notification a été supprimée.');\n    } catch {}\n  };\n\n  const onMarkAllRead = async () => {\n    try {\n      const unread = notifications.filter(n => !n.read);\n      for (const n of unread) {\n        await markNotificationRead(n._id);\n      }\n      setNotifications((prev) => prev.map(n => ({ ...n, read: true })));\n      prevUnreadIdsRef.current = new Set();\n      showToast('success', 'Toutes les notifications ont été marquées comme lues.');\n    } catch {}\n  };\n\n  const onDeleteAll = async () => {\n    try {\n      await deleteAllNotifications();\n      setNotifications([]);\n      prevUnreadIdsRef.current = new Set();\n      showToast('success', 'Toutes les notifications ont été supprimées.');\n    } catch {}\n  };\n\n  return (\n    <nav className=\"navbar navbar-expand-lg navbar-light bg-light px-3\">\n      {/* Toast notifications */}\n      {toast.show && (\n        <div style={{ position: 'fixed', top: 16, right: 16, zIndex: 2000, minWidth: 280 }}>\n          <div className={`alert alert-${toast.type} alert-dismissible fade show shadow`} role=\"alert\">\n            {toast.message}\n            <button type=\"button\" className=\"btn-close\" onClick={() => setToast({ ...toast, show: false })}></button>\n          </div>\n        </div>\n      )}\n\n      <button\n        type=\"button\"\n        className=\"navbar-brand shadow-sm p-2 rounded btn btn-link text-decoration-none\"\n        style={{ backgroundColor: \"#fff\", cursor: 'pointer' }}\n        onClick={() => navigate('/')}\n      >\n        My To Do App\n      </button>\n      {!isAuthenticated ? (\n        <div className=\"ms-auto\">\n          <a href=\"/login\" className=\"btn btn-outline-primary me-2\">\n            Connexion\n          </a>\n          <a href=\"/register\" className=\"btn btn-primary\">\n            Inscription\n          </a>\n        </div>\n      ) : (\n        <div className=\"ms-auto d-flex align-items-center\" ref={bellRef}>\n          <div className=\"position-relative me-3\">\n            <button className=\"btn btn-light position-relative\" onClick={() => setOpen(o => !o)} aria-label=\"Notifications\">\n              <i className=\"bi bi-bell fs-5\"></i>\n              {unreadCount > 0 && (\n                <span className=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\">\n                  {unreadCount}\n                  <span className=\"visually-hidden\">non lues</span>\n                </span>\n              )}\n            </button>\n            {open && (\n              <div className=\"dropdown-menu dropdown-menu-end show\" style={{ minWidth: 320, maxWidth: 420, right: 0 }}>\n                <div className=\"d-flex justify-content-between align-items-center px-3 py-2 border-bottom\">\n                  <strong>Notifications</strong>\n                  <div className=\"btn-group btn-group-sm\">\n                    <button className=\"btn btn-outline-secondary\" onClick={onMarkAllRead} disabled={unreadCount === 0}>Tout marquer lu</button>\n                    <button className=\"btn btn-outline-danger\" onClick={onDeleteAll} disabled={notifications.length === 0}>Tout supprimer</button>\n                  </div>\n                </div>\n                <div style={{ maxHeight: 360, overflowY: 'auto' }}>\n                  {notifications.length === 0 ? (\n                    <div className=\"px-3 py-3 text-muted\">Aucune notification</div>\n                  ) : (\n                    notifications.map((n) => (\n                      <div key={n._id} className={`px-3 py-2 border-bottom ${n.read ? '' : 'bg-light'}`}>\n                        <div className=\"d-flex justify-content-between align-items-start gap-2\">\n                          <div>\n                            <div className=\"fw-semibold small\">{n.title}</div>\n                            <div className=\"small text-muted\">{n.message}</div>\n                            <div className=\"small text-secondary\">{new Date(n.createdAt).toLocaleString()}</div>\n                          </div>\n                          <div className=\"d-flex align-items-center gap-2\">\n                            {!n.read && (\n                              <button className=\"btn btn-sm btn-link\" onClick={() => onMarkRead(n._id)}>Marquer lu</button>\n                            )}\n                            <button className=\"btn btn-sm btn-link text-danger\" onClick={() => onDeleteOne(n._id)} title=\"Supprimer\">\n                              <i className=\"bi bi-trash\"></i>\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    ))\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </nav>\n  );\n};\n\nexport default Header;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}